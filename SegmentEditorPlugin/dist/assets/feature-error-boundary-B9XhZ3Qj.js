import{ac as R,_,ad as E,c as A,ae as U,B as H,a7 as $,a8 as F,a9 as M,aa as V,ab as q}from"./index-BKFXkr8z.js";import{j as r,f as z}from"./tanstack-vendor-X9tglsqn.js";import{u as D}from"./i18n-vendor-CRTJ2_er.js";import{a7 as W,a8 as G,r as L,R as O}from"./ui-vendor-t9Z9dju3.js";function ae(a){const{itemId:e,container:n="mp4",audioCodec:s="aac",maxStreamingBitrate:i=14e7,startTimeTicks:l=0}=a,c=new URLSearchParams({DeviceId:E(),MediaSourceId:e.replace(/-/g,""),PlaySessionId:_(),VideoCodec:"av1,hevc,h264,vp9",AudioCodec:s,VideoBitrate:String(i),AudioBitrate:"384000",AudioSampleRate:"48000",MaxStreamingBitrate:String(i),StartTimeTicks:String(l),TranscodingProtocol:"hls",SegmentContainer:n,MinSegments:"1",BreakOnNonKeyFrames:"True",RequireAvc:"false",EnableAudioVbrEncoding:"true",TranscodingMaxAudioChannels:"6","h264-profile":"high","h264-level":"51","hevc-profile":"main,main10","hevc-level":"186","av1-profile":"main"});return R(`Videos/${e}/master.m3u8`,c)}function K(a){const{itemId:e,imageType:n="Primary",maxWidth:s,maxHeight:i,quality:l=90,tag:c,fillWidth:m,fillHeight:o}=a,t=new URLSearchParams({quality:String(l)});return s!=null&&t.set("maxWidth",String(s)),i!=null&&t.set("maxHeight",String(i)),m!=null&&t.set("fillWidth",String(m)),o!=null&&t.set("fillHeight",String(o)),c&&t.set("tag",c),R(`Items/${e}/Images/${n}`,t)}function te(a,e,n){if(!a.Id)return;const s=[a.ImageTags?.Primary?{itemId:a.Id,imageType:"Primary",tag:a.ImageTags.Primary}:null,a.BackdropImageTags?.[0]?{itemId:a.Id,imageType:"Backdrop",tag:a.BackdropImageTags[0]}:null,a.ImageTags?.Thumb?{itemId:a.Id,imageType:"Thumb",tag:a.ImageTags.Thumb}:null,a.ParentThumbItemId?{itemId:a.ParentThumbItemId,imageType:"Thumb"}:null,a.SeriesId&&a.SeriesPrimaryImageTag?{itemId:a.SeriesId,imageType:"Primary",tag:a.SeriesPrimaryImageTag}:null];for(const i of s)if(i){const l=K({itemId:i.itemId,imageType:i.imageType,maxWidth:e,maxHeight:n,tag:i.tag});if(l)return l}}function re(a){const e=a.ImageBlurHashes?.Primary;return e?Object.values(e)[0]:void 0}function Y(a){const e=A.c(39),{featureName:n,minHeightClass:s,showNavigation:i,errorMessage:l,onRetry:c}=a,m=s===void 0?"min-h-[var(--spacing-page-min-height-sm)]":s,o=i===void 0?!0:i,{t}=D(),d=z();let S;e[0]!==d?(S=()=>{d({to:"/"})},e[0]=d,e[1]=S):S=e[1];const B=S;let j;e[2]!==d?(j=()=>{d({to:"/"})},e[2]=d,e[3]=j):j=e[3];const k=j,w=`flex items-center justify-center p-4 ${m}`;let C;e[4]===Symbol.for("react.memo_cache_sentinel")?(C=r.jsx("div",{className:"mx-auto flex size-16 items-center justify-center rounded-full bg-destructive/10",children:r.jsx(L,{className:"size-8 text-destructive","aria-hidden":"true"})}),e[4]=C):C=e[4];const P=`${n} Error`;let u;e[5]!==n||e[6]!==t||e[7]!==P?(u=t("error.feature_error",{feature:n,defaultValue:P}),e[5]=n,e[6]=t,e[7]=P,e[8]=u):u=e[8];let g;e[9]!==u?(g=r.jsx($,{className:"text-xl",children:u}),e[9]=u,e[10]=g):g=e[10];let f;e[11]!==l||e[12]!==t?(f=l||t("error.feature_description","This feature encountered an error. You can try again or navigate elsewhere."),e[11]=l,e[12]=t,e[13]=f):f=e[13];let h;e[14]!==f?(h=r.jsx(F,{children:f}),e[14]=f,e[15]=h):h=e[15];let x;e[16]!==h||e[17]!==g?(x=r.jsxs(M,{className:"space-y-4",children:[C,g,h]}),e[16]=h,e[17]=g,e[18]=x):x=e[18];let N;e[19]===Symbol.for("react.memo_cache_sentinel")?(N=r.jsx(O,{className:"size-4","aria-hidden":"true"}),e[19]=N):N=e[19];let I;e[20]!==t?(I=t("common.retry","Try Again"),e[20]=t,e[21]=I):I=e[21];let p;e[22]!==c||e[23]!==I?(p=r.jsxs(H,{variant:"outline",onClick:c,children:[N,I]}),e[22]=c,e[23]=I,e[24]=p):p=e[24];let y;e[25]!==B||e[26]!==k||e[27]!==o||e[28]!==t?(y=o&&r.jsxs(r.Fragment,{children:[r.jsxs(H,{variant:"outline",onClick:B,children:[r.jsx(W,{className:"size-4","aria-hidden":"true"}),t("common.go_back","Go Back")]}),r.jsxs(H,{onClick:k,children:[r.jsx(G,{className:"size-4","aria-hidden":"true"}),t("common.home","Home")]})]}),e[25]=B,e[26]=k,e[27]=o,e[28]=t,e[29]=y):y=e[29];let v;e[30]!==p||e[31]!==y?(v=r.jsxs(V,{className:"flex flex-col gap-3 sm:flex-row sm:justify-center",children:[p,y]}),e[30]=p,e[31]=y,e[32]=v):v=e[32];let T;e[33]!==x||e[34]!==v?(T=r.jsxs(q,{className:"w-full max-w-md text-center",children:[x,v]}),e[33]=x,e[34]=v,e[35]=T):T=e[35];let b;return e[36]!==T||e[37]!==w?(b=r.jsx("div",{className:w,role:"alert","aria-live":"assertive",children:T}),e[36]=T,e[37]=w,e[38]=b):b=e[38],b}function ie(a){const e=A.c(9),{children:n,featureName:s,minHeightClass:i,showNavigation:l,errorMessage:c}=a,m=l===void 0?!0:l;let o;e[0]!==c||e[1]!==s||e[2]!==i||e[3]!==m?(o=r.jsx(Y,{featureName:s,minHeightClass:i,showNavigation:m,errorMessage:c,onRetry:J}),e[0]=c,e[1]=s,e[2]=i,e[3]=m,e[4]=o):o=e[4];let t;return e[5]!==n||e[6]!==s||e[7]!==o?(t=r.jsx(U,{componentName:s,fallback:o,children:n}),e[5]=n,e[6]=s,e[7]=o,e[8]=t):t=e[8],t}function J(){return window.location.reload()}export{ie as F,ae as a,re as b,te as g};
